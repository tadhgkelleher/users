<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Mandala - Interactive Sanctuary (All-in-One Prototype)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400&family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- General Styling --- */
        :root {
            --primary-color: #4a148c; /* Deep Purple */
            --secondary-color: #8e24aa; /* Lighter Purple */
            --accent-color: #ffab40; /* Amber/Gold */
            --text-color: #333;
            --bg-color: #f4f2f7; /* Very light lavender */
            --light-gray: #e0e0e0;
        }

        body {
            font-family: 'Lora', serif;
            line-height: 1.7;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            padding: 0 20px;
        }

        /* --- Header & Navigation --- */
        header {
            background: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        nav ul {
            list-style: none;
            display: flex;
            margin: 0;
            padding: 0;
        }

        nav ul li { margin-left: 25px; }
        nav ul li a {
            text-decoration: none;
            color: var(--secondary-color);
            font-weight: 600;
            cursor: pointer;
            transition: color 0.3s ease;
            padding: 10px 5px;
        }
        nav ul li a:hover, nav ul li a.active {
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
        }

        /* --- Main Content & View Switching --- */
        .view {
            display: none; /* Hidden by default */
            padding: 60px 0;
            animation: fadeIn 0.5s ease-in-out;
        }
        .view.active {
            display: block; /* Shown by JS */
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 40px;
            text-align: center;
        }

        /* --- Creator View Styling --- */
        #creator-view .creator-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
            align-items: flex-start;
        }
        #mandalaCanvas {
            background: #fff;
            border: 1px solid var(--light-gray);
            border-radius: 10px;
            cursor: crosshair;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .controls {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .control-group { margin-bottom: 25px; }
        .control-group h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            color: var(--secondary-color);
            margin-top: 0; margin-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
            padding-bottom: 10px;
        }
        .color-palette {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        .color-box {
            width: 30px; height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: border-color 0.2s;
        }
        .color-box.active {
            border-color: var(--accent-color);
        }
        .slider-group {
            display: flex;
            flex-direction: column;
        }
        .slider-group label {
            font-family: 'Montserrat';
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        .slider-group input[type="range"] { width: 100%; }
        .button-group { display: flex; flex-direction: column; gap: 10px; }
        .btn {
            background: var(--primary-color);
            color: #fff;
            border: none;
            padding: 12px 15px;
            font-family: 'Montserrat';
            font-weight: 600;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn:hover { background: var(--secondary-color); }
        .btn.accent { background: var(--accent-color); }
        .btn.accent:hover { background: #ffc107; }

        /* --- Library View Styling --- */
        .article-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        .article-card {
            background: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .article-card h3 {
            font-family: 'Montserrat', sans-serif;
            color: var(--secondary-color);
            margin-top: 0;
        }

        /* --- Gallery View Styling --- */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 8px;
        }
        .gallery-item img {
            width: 100%; height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.4s ease;
        }
        .gallery-item:hover img {
            transform: scale(1.1);
        }
        .gallery-item .overlay {
            position: absolute;
            bottom: 0; left: 0; right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            color: #fff;
            padding: 20px 10px 10px 10px;
            font-family: 'Montserrat';
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s, transform 0.3s;
        }
        .gallery-item:hover .overlay {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Footer --- */
        footer {
            background-color: var(--primary-color);
            color: #fff;
            text-align: center;
            padding: 40px 20px;
            font-family: 'Montserrat', sans-serif;
        }

    </style>
</head>
<body>

    <!-- HEADER & NAVIGATION -->
    <header>
        <nav class="container">
            <a href="#" class="logo">My-Mandala.com</a>
            <ul>
                <li><a onclick="showView('creator-view', this)" class="active">Create</a></li>
                <li><a onclick="showView('library-view', this)">Learn</a></li>
                <li><a onclick="showView('gallery-view', this)">Gallery</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <!-- VIEW 1: THE CREATOR -->
        <section id="creator-view" class="view active">
            <h2 class="section-title">The Digital Mandala Creator</h2>
            <div class="creator-layout">
                <aside class="controls">
                    <div class="control-group">
                        <h3>Colors</h3>
                        <div class="color-palette" id="colorPalette">
                            <!-- Colors will be added by JS -->
                        </div>
                    </div>
                    <div class="control-group">
                        <h3>Brush Size</h3>
                        <div class="slider-group">
                            <label for="brushSize">Size: <span id="brushSizeValue">5</span>px</label>
                            <input type="range" id="brushSize" min="1" max="50" value="5">
                        </div>
                    </div>
                    <div class="control-group">
                        <h3>Symmetry</h3>
                        <div class="slider-group">
                            <label for="sliceCount">Slices: <span id="sliceCountValue">12</span></label>
                            <input type="range" id="sliceCount" min="2" max="36" value="12" step="2">
                        </div>
                    </div>
                    <div class="control-group button-group">
                        <button id="clearBtn" class="btn">Clear Canvas</button>
                        <button id="downloadBtn" class="btn accent">Download Mandala</button>
                    </div>
                </aside>
                <div class="canvas-container">
                    <canvas id="mandalaCanvas" width="800" height="800"></canvas>
                </div>
            </div>
        </section>

        <!-- VIEW 2: THE LIBRARY -->
        <section id="library-view" class="view">
            <h2 class="section-title">Library of Meanings</h2>
            <div class="article-grid">
                <div class="article-card">
                    <h3>The Symbolism of Color</h3>
                    <p>Colors are not just aesthetic choices in a mandala; they are imbued with deep meaning. Red often symbolizes strength and passion, blue represents tranquility and wisdom, while yellow can signify intellect and happiness. Learn how to choose colors to reflect your intentions.</p>
                </div>
                <div class="article-card">
                    <h3>Understanding Sacred Geometry</h3>
                    <p>From the simple circle representing wholeness to the intricate 'Flower of Life', geometric shapes form the foundation of mandalas. Each shape has a vibration and a meaning, creating a visual language that speaks to the soul. Explore the key shapes and their significance.</p>
                </div>
                <div class="article-card">
                    <h3>Mandalas for Mindfulness & Stress Relief</h3>
                    <p>The act of creating a mandala is a form of active meditation. The focus on repetitive patterns and symmetry helps to quiet the chattering mind, reduce anxiety, and bring you into the present moment. Discover techniques to use our creator tool as a path to inner peace.</p>
                </div>
            </div>
        </section>

        <!-- VIEW 3: THE GALLERY -->
        <section id="gallery-view" class="view">
            <h2 class="section-title">Community Gallery</h2>
            <div class="gallery-grid">
                <!-- These are placeholders. In a real app, this data would come from a database. -->
                <div class="gallery-item">
                    <img src="https://placehold.co/400x400/8e24aa/ffffff?text=Galaxy" alt="User mandala 1">
                    <div class="overlay">By User_Creative</div>
                </div>
                <div class="gallery-item">
                    <img src="https://placehold.co/400x400/ffab40/4a148c?text=Sunrise" alt="User mandala 2">
                    <div class="overlay">By MindfulArtist</div>
                </div>
                <div class="gallery-item">
                    <img src="https://placehold.co/400x400/388e3c/ffffff?text=Forest" alt="User mandala 3">
                    <div class="overlay">By ZenDrawer_99</div>
                </div>
                <div class="gallery-item">
                    <img src="https://placehold.co/400x400/1e88e5/ffffff?text=Ocean" alt="User mandala 4">
                    <div class="overlay">By FlowState</div>
                </div>
                <div class="gallery-item">
                    <img src="https://placehold.co/400x400/e53935/ffffff?text=Passion" alt="User mandala 5">
                    <div class="overlay">By User_12345</div>
                </div>
                <div class="gallery-item">
                    <img src="https://placehold.co/400x400/4a148c/ffab40?text=Royal" alt="User mandala 6">
                    <div class="overlay">By MandalaMaster</div>
                </div>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer>
        <p>© 2024 My-Mandala.com. A functional prototype.</p>
    </footer>

    <script>
        // --- VIEW SWITCHING LOGIC ---
        const views = document.querySelectorAll('.view');
        const navLinks = document.querySelectorAll('nav ul li a');

        function showView(viewId, clickedLink) {
            // Hide all views
            views.forEach(view => view.classList.remove('active'));
            // Show the target view
            document.getElementById(viewId).classList.add('active');

            // Update active state on nav links
            navLinks.forEach(link => link.classList.remove('active'));
            clickedLink.classList.add('active');
        }

        // --- MANDALA CREATOR LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('mandalaCanvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size based on its container for responsiveness
            const canvasContainer = document.querySelector('.canvas-container');
            function resizeCanvas() {
                const size = Math.min(canvasContainer.offsetWidth, 800);
                canvas.width = size;
                canvas.height = size;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);


            // --- Tool State ---
            let isDrawing = false;
            let currentLineWeight = 5;
            let currentColor = '#4a148c';
            let numSlices = 12;
            let lastX = 0;
            let lastY = 0;

            // --- Controls ---
            const brushSizeSlider = document.getElementById('brushSize');
            const brushSizeValue = document.getElementById('brushSizeValue');
            const sliceCountSlider = document.getElementById('sliceCount');
            const sliceCountValue = document.getElementById('sliceCountValue');
            const clearBtn = document.getElementById('clearBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const colorPaletteContainer = document.getElementById('colorPalette');

            // --- Color Palette Setup ---
            const colors = ['#4a148c', '#8e24aa', '#ffab40', '#388e3c', '#1e88e5', '#e53935', '#ffffff', '#616161', '#000000', '#f44336'];
            colors.forEach(color => {
                const colorBox = document.createElement('div');
                colorBox.className = 'color-box';
                colorBox.style.backgroundColor = color;
                colorBox.dataset.color = color;
                if (color === currentColor) {
                    colorBox.classList.add('active');
                }
                colorBox.addEventListener('click', () => {
                    currentColor = color;
                    document.querySelectorAll('.color-box').forEach(box => box.classList.remove('active'));
                    colorBox.classList.add('active');
                });
                colorPaletteContainer.appendChild(colorBox);
            });

            // --- Event Listeners for Controls ---
            brushSizeSlider.oninput = (e) => {
                currentLineWeight = e.target.value;
                brushSizeValue.textContent = e.target.value;
            };
            sliceCountSlider.oninput = (e) => {
                numSlices = e.target.value;
                sliceCountValue.textContent = e.target.value;
            };
            clearBtn.onclick = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            };
            downloadBtn.onclick = () => {
                const link = document.createElement('a');
                link.download = 'my-mandala.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            };

            // --- Drawing Logic ---
            function draw(e) {
                if (!isDrawing) return;

                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                const angleIncrement = (Math.PI * 2) / numSlices;
                
                // Get mouse position relative to canvas
                const rect = canvas.getBoundingClientRect();
                const currentX = e.clientX - rect.left;
                const currentY = e.clientY - rect.top;

                for (let i = 0; i < numSlices; i++) {
                    ctx.save();
                    ctx.translate(centerX, centerY);
                    ctx.rotate(i * angleIncrement);
                    
                    // Symmetrical drawing
                    ctx.beginPath();
                    ctx.moveTo(lastX - centerX, lastY - centerY);
                    ctx.lineTo(currentX - centerX, currentY - centerY);
                    
                    // Mirrored drawing
                    ctx.moveTo(centerX - lastX, lastY - centerY);
                    ctx.lineTo(centerX - currentX, currentY - centerY);
                    
                    ctx.strokeStyle = currentColor;
                    ctx.lineWidth = currentLineWeight;
                    ctx.lineCap = 'round';
                    ctx.stroke();
                    ctx.restore();
                }

                [lastX, lastY] = [currentX, currentY];
            }

            canvas.addEventListener('mousedown', (e) => {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                [lastX, lastY] = [e.clientX - rect.left, e.clientY - rect.top];
                draw(e);
            });
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', () => isDrawing = false);
            canvas.addEventListener('mouseout', () => isDrawing = false);
            
            // For touch devices
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                const touch = e.touches[0];
                [lastX, lastY] = [touch.clientX - rect.left, touch.clientY - rect.top];
                draw(e.touches[0]);
            }, { passive: false });
            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                draw(e.touches[0]);
            }, { passive: false });
            canvas.addEventListener('touchend', () => isDrawing = false);

            // Set initial active view and link state
            showView('creator-view', navLinks[0]);
        });
    </script>
</body>
</html>
