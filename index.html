<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Mandala - Your Digital Sanctuary for Creativity & Mindfulness</title>
    
    <!-- Google AdSense Script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5470051995144012"
     crossorigin="anonymous"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400&family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- General Styling --- */
        :root {
            --primary-color: #4a148c; /* Deep Purple */
            --secondary-color: #8e24aa; /* Lighter Purple */
            --accent-color: #ffab40; /* Amber/Gold */
            --text-color: #333;
            --bg-color: #f4f2f7; /* Very light lavender */
            --light-gray: #e0e0e0;
        }

        body {
            font-family: 'Lora', serif;
            line-height: 1.7;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        body.modal-open {
            overflow: hidden;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            padding: 0 20px;
        }

        /* --- Header & Navigation --- */
        header {
            background: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        nav ul {
            list-style: none;
            display: flex;
            margin: 0;
            padding: 0;
        }

        nav ul li { margin-left: 25px; }
        nav ul li a {
            text-decoration: none;
            color: var(--secondary-color);
            font-weight: 600;
            cursor: pointer;
            transition: color 0.3s ease, border-bottom-color 0.3s ease;
            padding: 10px 5px;
            border-bottom: 2px solid transparent;
        }
        nav ul li a:hover, nav ul li a.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }

        /* --- Main Content & View Switching --- */
        .view {
            display: none;
            padding: 60px 0;
            animation: fadeIn 0.5s ease-in-out;
        }
        .view.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 40px;
            text-align: center;
        }

        /* --- Creator View Styling --- */
        #creator-view .creator-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 30px;
            align-items: flex-start;
        }
        #mandalaCanvas {
            background: #fff;
            border: 1px solid var(--light-gray);
            border-radius: 10px;
            cursor: crosshair;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            width: 100%;
            height: auto;
        }
        .controls {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .control-group { margin-bottom: 25px; }
        .control-group h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            color: var(--secondary-color);
            margin-top: 0; margin-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
            padding-bottom: 10px;
        }
        .color-palette {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(30px, 1fr));
            gap: 10px;
        }
        .color-box {
            width: 30px; height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: border-color 0.2s;
        }
        .color-box.active {
            border-color: var(--accent-color);
        }
        .slider-group { display: flex; flex-direction: column; }
        .slider-group label {
            font-family: 'Montserrat';
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        .slider-group input[type="range"] { width: 100%; }
        .button-group { display: flex; flex-direction: column; gap: 10px; }
        .btn {
            background: var(--primary-color);
            color: #fff; border: none; padding: 12px 15px;
            font-family: 'Montserrat'; font-weight: 600;
            border-radius: 5px; cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn:hover { background: var(--secondary-color); }
        .btn.accent { background: var(--accent-color); }
        .btn.accent:hover { background: #ffc107; }

        /* --- Library View Styling --- */
        .article-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
        }
        .article-card {
            background: #fff;
            padding: 25px; border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            display: flex; flex-direction: column;
        }
        .article-card h3 {
            font-family: 'Montserrat', sans-serif;
            color: var(--secondary-color);
            margin-top: 0;
        }
        .article-card .summary { flex-grow: 1; }
        .article-card .read-more-link {
            font-family: 'Montserrat';
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }
        .article-card .read-more-link:hover { color: var(--accent-color); }
        .full-text { display: none; }

        /* --- Gallery View Styling --- */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        .gallery-item {
            position: relative; overflow: hidden;
            border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .gallery-item img {
            width: 100%; height: 100%; object-fit: cover;
            display: block; transition: transform 0.4s ease;
        }
        .gallery-item:hover img { transform: scale(1.1); }
        .gallery-item .overlay {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            color: #fff; padding: 25px 15px 10px 15px;
            font-family: 'Montserrat'; font-size: 0.9rem;
            opacity: 0; transform: translateY(20px);
            transition: opacity 0.3s, transform 0.3s;
        }
        .gallery-item:hover .overlay { opacity: 1; transform: translateY(0); }
        
        /* --- Modal Styling (NEW) --- */
        #article-modal {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out;
        }
        #article-modal.visible {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            background: #fff;
            padding: 40px;
            border-radius: 10px;
            max-width: 700px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s ease-in-out;
        }
        #article-modal.visible .modal-content {
            transform: scale(1);
        }
        .modal-content h2 {
            font-family: 'Montserrat', sans-serif;
            color: var(--primary-color);
            margin-top: 0;
        }
        .close-modal {
            position: absolute;
            top: 15px; right: 20px;
            font-size: 2rem;
            font-weight: bold;
            color: var(--light-gray);
            cursor: pointer;
            line-height: 1;
        }
        .close-modal:hover {
            color: var(--text-color);
        }

        /* --- Footer --- */
        footer {
            background-color: var(--primary-color);
            color: #fff; text-align: center;
            padding: 40px 20px; font-family: 'Montserrat', sans-serif;
        }
    </style>
</head>
<body>

    <!-- HEADER & NAVIGATION -->
    <header>
        <nav class="container">
            <a href="#" class="logo">my-mandala.com</a>
            <ul>
                <li><a onclick="showView('creator-view', this)" class="active">Create</a></li>
                <li><a onclick="showView('library-view', this)">Learn</a></li>
                <li><a onclick="showView('gallery-view', this)">Gallery</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <!-- VIEW 1: THE CREATOR -->
        <section id="creator-view" class="view active">
            <h2 class="section-title">The Digital Mandala Creator</h2>
            <div class="creator-layout">
                <aside class="controls">
                    <div class="control-group"><h3>Colors</h3><div class="color-palette" id="colorPalette"></div></div>
                    <div class="control-group"><h3>Brush Style</h3><div class="slider-group"><label for="brushSize">Size: <span id="brushSizeValue">5</span>px</label><input type="range" id="brushSize" min="1" max="50" value="5"></div></div>
                    <div class="control-group"><h3>Symmetry</h3><div class="slider-group"><label for="sliceCount">Slices: <span id="sliceCountValue">12</span></label><input type="range" id="sliceCount" min="2" max="36" value="12" step="2"></div></div>
                    <div class="control-group button-group"><button id="clearBtn" class="btn">Clear Canvas</button><button id="downloadBtn" class="btn accent">Download Mandala</button></div>
                </aside>
                <div class="canvas-container"><canvas id="mandalaCanvas"></canvas></div>
            </div>
        </section>

        <!-- VIEW 2: THE LIBRARY -->
        <section id="library-view" class="view">
            <h2 class="section-title">Library of Meanings</h2>
            <div class="article-grid">
                <div class="article-card">
                    <h3>The Symbolism of Color</h3>
                    <p class="summary">In the language of mandalas, colors are potent symbols. Red ignites passion, blue invokes calm, and yellow radiates optimism. Choosing your palette is the first step in setting your intention...</p>
                    <a class="read-more-link">Read More »</a>
                    <div class="full-text">In the rich visual language of mandalas, colors are never arbitrary; they are potent symbols that carry deep psychological and spiritual significance. Choosing your palette is the first step in setting the intention for your creation. <strong>Red</strong> is the color of the root chakra, symbolizing strength, energy, passion, and the life force itself. Use it when you need courage or vitality. <strong>Blue</strong>, the color of the throat and third-eye chakras, invokes tranquility, wisdom, and spiritual devotion. It is ideal for meditative pieces aimed at enhancing intuition and calm. <strong>Yellow</strong>, tied to the solar plexus chakra, radiates intellect, joyful optimism, and personal power. It's a wonderful color for mandalas intended to boost confidence and happiness. Meanwhile, <strong>Green</strong> resonates with the heart chakra, representing nature, healing, growth, and balance. Finally, <strong>Purple</strong>, connected to the crown chakra, elevates our consciousness, symbolizing royalty, magic, and the divine. By consciously selecting and combining these colors, your mandala becomes a powerful tool for personal transformation.</div>
                </div>
                <div class="article-card">
                    <h3>Understanding Sacred Geometry</h3>
                    <p class="summary">The universe is built on patterns, and mandalas are a reflection of this sacred architecture. The central point, the circle, and radiating lines all hold profound meaning...</p>
                    <a class="read-more-link">Read More »</a>
                    <div class="full-text">The universe is built on elegant mathematical patterns, and mandalas are a beautiful, microcosm of this sacred architecture. Every line and shape holds a profound, archetypal meaning. The <strong>central point</strong>, or *bindu*, is the beginning—the seed of creation from which all else emerges. It represents unity and the source of existence. The <strong>circle</strong> that encloses the mandala is a universal symbol of wholeness, eternity, and the cyclical nature of life. It provides a container for the sacred space within. <strong>Triangles</strong> represent the trinity (mind, body, spirit) and dynamic energy; pointing up, they signify aspiration towards the divine, and pointing down, they represent the grounding of spiritual energy into the material world. The <strong>square</strong> often represents the physical world, stability, and the four cardinal directions. When you engage with these forms, you are aligning your own energy with the fundamental structures of existence, creating a deep sense of harmony within and without.</div>
                </div>
                <div class="article-card">
                    <h3>Mandalas for Mindfulness</h3>
                    <p class="summary">Creating a mandala is a profound form of active meditation. The focused repetition and the pursuit of symmetry command your full attention, effortlessly quieting the mind...</p>
                    <a class="read-more-link">Read More »</a>
                    <div class="full-text">In our fast-paced world, finding moments of true presence can be a challenge. Creating a mandala offers a powerful and accessible path to mindfulness through a process known as active meditation. Unlike passive meditation where one sits in silence, this practice engages the hands and eyes in a focused, repetitive task. The pursuit of symmetry and the rhythmic motion of drawing command your full attention, leaving little room for anxious thoughts or external distractions. This focused state, often called "flow," effortlessly quiets the incessant chatter of the mind. Scientific studies have shown that such activities can lower heart rate, reduce blood pressure, and decrease levels of the stress hormone cortisol. It's not about achieving artistic perfection; the true benefit lies in the peaceful journey of creation. Each line drawn is a step back to your center, a moment of calm in the chaos of daily life.</div>
                </div>
            </div>
        </section>

        <!-- VIEW 3: THE GALLERY -->
        <section id="gallery-view" class="view">
            <h2 class="section-title">Community Gallery</h2>
            <div id="galleryGrid" class="gallery-grid"></div>
        </section>
    </main>

    <!-- ARTICLE MODAL (NEW) -->
    <div id="article-modal">
        <div class="modal-content">
            <span class="close-modal">×</span>
            <h2 id="modal-title"></h2>
            <p id="modal-body"></p>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <p>© 2024 my-mandala.com. A sanctuary for creativity and mindfulness.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- VIEW SWITCHING LOGIC ---
            const views = document.querySelectorAll('.view');
            const navLinks = document.querySelectorAll('nav ul li a');
            window.showView = function(viewId, clickedLink) {
                views.forEach(view => view.classList.remove('active'));
                document.getElementById(viewId).classList.add('active');
                navLinks.forEach(link => link.classList.remove('active'));
                clickedLink.classList.add('active');
            }

            // --- ARTICLE MODAL LOGIC (NEW) ---
            const modal = document.getElementById('article-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const closeModalBtn = document.querySelector('.close-modal');
            const readMoreLinks = document.querySelectorAll('.read-more-link');

            function openModal(title, content) {
                modalTitle.textContent = title;
                modalBody.innerHTML = content; // Using innerHTML to preserve potential formatting like <strong>
                modal.classList.add('visible');
                document.body.classList.add('modal-open');
            }

            function closeModal() {
                modal.classList.remove('visible');
                document.body.classList.remove('modal-open');
            }

            readMoreLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const card = link.closest('.article-card');
                    const title = card.querySelector('h3').textContent;
                    const content = card.querySelector('.full-text').innerHTML;
                    openModal(title, content);
                });
            });

            closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('visible')) {
                    closeModal();
                }
            });
            
            // --- GALLERY POPULATION ---
            function generateSampleMandala(config) {
                const canvas = document.createElement('canvas');
                const size = 400; canvas.width = size; canvas.height = size;
                const ctx = canvas.getContext('2d'); const center = size / 2;
                ctx.fillStyle = config.bgColor || '#ffffff'; ctx.fillRect(0, 0, size, size);
                const slices = config.slices || 12; const angleIncrement = (Math.PI * 2) / slices;
                for (let i = 0; i < slices; i++) {
                    ctx.save(); ctx.translate(center, center); ctx.rotate(i * angleIncrement);
                    for(let j = 1; j < 5; j++) {
                        ctx.beginPath(); ctx.moveTo(0, 0);
                        ctx.arc(config.arcPos * j, 0, config.arcSize * j, 0, Math.PI * 0.1 * config.arcSweep);
                        ctx.lineTo(0,0); ctx.fillStyle = config.colors[j % config.colors.length]; ctx.fill();
                        ctx.beginPath(); ctx.moveTo(0,0); ctx.lineTo(size/3, size/8);
                        ctx.strokeStyle = config.colors[(j+1) % config.colors.length];
                        ctx.lineWidth = config.lineWidth; ctx.stroke();
                    }
                    ctx.restore();
                }
                return canvas.toDataURL();
            }

            function populateGallery() {
                const galleryGrid = document.getElementById('galleryGrid');
                const galleryItems = [
                    { author: 'Cosmic Weaver', config: { colors: ['#4a148c', '#8e24aa', '#d1c4e9'], arcPos: 30, arcSize: 10, arcSweep: 1.2, lineWidth: 1, slices: 16 } },
                    { author: 'Serenity Seeker', config: { colors: ['#1e88e5', '#90caf9', '#e3f2fd'], arcPos: 20, arcSize: 15, arcSweep: 1.5, lineWidth: 2, slices: 8 } },
                    { author: 'Pattern Poet', config: { colors: ['#388e3c', '#a5d6a7', '#e8f5e9'], arcPos: 40, arcSize: 8, arcSweep: 0.8, lineWidth: 3, slices: 12 } },
                    { author: 'Golden Artist', config: { colors: ['#ffab40', '#ffecb3', '#fff8e1'], arcPos: 25, arcSize: 12, arcSweep: 1.0, lineWidth: 1.5, slices: 20, bgColor: '#424242' } },
                    { author: 'Crimson Creator', config: { colors: ['#e53935', '#ef9a9a', '#ffebee'], arcPos: 35, arcSize: 18, arcSweep: 1.3, lineWidth: 2.5, slices: 10 } },
                    { author: 'Mindful Muse', config: { colors: ['#6d4c41', '#bcaaa4', '#efebe9'], arcPos: 15, arcSize: 20, arcSweep: 1.8, lineWidth: 0.5, slices: 24 } }
                ];
                let galleryHTML = '';
                galleryItems.forEach(item => {
                    const imageDataUrl = generateSampleMandala(item.config);
                    galleryHTML += `<div class="gallery-item"><img src="${imageDataUrl}" alt="A generated mandala by ${item.author}"><div class="overlay">By ${item.author}</div></div>`;
                });
                galleryGrid.innerHTML = galleryHTML;
            }

            // --- MANDALA CREATOR LOGIC ---
            const canvas = document.getElementById('mandalaCanvas'); const ctx = canvas.getContext('2d');
            function resizeCanvas() { const container = document.querySelector('.canvas-container'); const size = container.offsetWidth; canvas.width = size; canvas.height = size; }
            window.addEventListener('resize', resizeCanvas);
            let isDrawing = false, currentLineWeight = 5, currentColor = '#4a148c', numSlices = 12, lastX = 0, lastY = 0;
            const brushSizeSlider = document.getElementById('brushSize'), brushSizeValue = document.getElementById('brushSizeValue'), sliceCountSlider = document.getElementById('sliceCount'), sliceCountValue = document.getElementById('sliceCountValue'), clearBtn = document.getElementById('clearBtn'), downloadBtn = document.getElementById('downloadBtn'), colorPaletteContainer = document.getElementById('colorPalette');
            const colors = ['#4a148c', '#8e24aa', '#d1c4e9', '#ffab40', '#388e3c', '#1e88e5', '#e53935', '#616161', '#000000', '#ffffff'];
            colors.forEach(color => {
                const colorBox = document.createElement('div'); colorBox.className = 'color-box'; colorBox.style.backgroundColor = color;
                if (color === currentColor) colorBox.classList.add('active');
                colorBox.addEventListener('click', () => { currentColor = color; document.querySelectorAll('.color-box').forEach(box => box.classList.remove('active')); colorBox.classList.add('active'); });
                colorPaletteContainer.appendChild(colorBox);
            });
            brushSizeSlider.oninput = (e) => { currentLineWeight = e.target.value; brushSizeValue.textContent = e.target.value; };
            sliceCountSlider.oninput = (e) => { numSlices = e.target.value; sliceCountValue.textContent = e.target.value; };
            clearBtn.onclick = () => { ctx.clearRect(0, 0, canvas.width, canvas.height); };
            downloadBtn.onclick = () => { const link = document.createElement('a'); link.download = 'my-mandala.png'; link.href = canvas.toDataURL('image/png'); link.click(); };
            function getPos(evt) { const rect = canvas.getBoundingClientRect(); return evt.type.includes('touch') ? { x: evt.touches[0].clientX - rect.left, y: evt.touches[0].clientY - rect.top } : { x: evt.clientX - rect.left, y: evt.clientY - rect.top }; }
            function draw(pos) {
                if (!isDrawing) return; const centerX = canvas.width / 2, centerY = canvas.height / 2, angle = (Math.PI * 2) / numSlices;
                for (let i = 0; i < numSlices; i++) {
                    ctx.save(); ctx.translate(centerX, centerY); ctx.rotate(i * angle);
                    ctx.beginPath(); ctx.moveTo(lastX - centerX, lastY - centerY); ctx.lineTo(pos.x - centerX, pos.y - centerY);
                    ctx.moveTo(centerX - lastX, lastY - centerY); ctx.lineTo(centerX - pos.x, pos.y - centerY);
                    ctx.strokeStyle = currentColor; ctx.lineWidth = currentLineWeight; ctx.lineCap = 'round'; ctx.stroke(); ctx.restore();
                }
                [lastX, lastY] = [pos.x, pos.y];
            }
            function startDrawing(e) { isDrawing = true; const pos = getPos(e); [lastX, lastY] = [pos.x, pos.y]; draw(pos); }
            function stopDrawing() { isDrawing = false; }
            canvas.addEventListener('mousedown', startDrawing); canvas.addEventListener('mousemove', (e) => draw(getPos(e))); canvas.addEventListener('mouseup', stopDrawing); canvas.addEventListener('mouseout', stopDrawing);
            canvas.addEventListener('touchstart', (e) => { e.preventDefault(); startDrawing(e); }, { passive: false }); canvas.addEventListener('touchmove', (e) => { e.preventDefault(); draw(getPos(e)); }, { passive: false }); canvas.addEventListener('touchend', stopDrawing);

            // --- INITIALIZATION ---
            populateGallery(); resizeCanvas(); showView('creator-view', navLinks[0]);
        });
    </script>
</body>
</html>
